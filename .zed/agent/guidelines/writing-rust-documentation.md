# Rust Coding Guidelines: Documentation

CRITICAL: All doc comments (`///`) and module documentation (`//!`) must follow
these strict guidelines for API references.

## Doc Comments as API References

Doc comments (`///`) must serve as an API reference, explaining the **what** and
**why** (intent) rather than **how** (implementation details).

### Documentation Requirements

- Every module file must include top-level documentation (`//!`) summarizing its
  role
- Every public item should have a doc comment explaining its purpose
- Doc comments should focus on behavior and usage, not implementation
- Use clear, simple English that is easy to understand

### Format Guidelines

- Avoid bullet points and unnecessary headers such as "Architecture",
  "Arguments", "Returns". "Example" header is OK
- Doc comments should flow as a paragraph. Simple lists are acceptable if they
  improve clarity
- Avoid list items that start with bold labels (e.g., "**Important:**",
  "**Note:** "). Write the point directly in plain text instead

### Language Style

Write doc comments using clear, simple English. Avoid unnecessarily complex
words, jargon, or academic phrasing. Favor plain language that communicates
concepts directly without ambiguity.

Words to avoid and their simpler alternatives:

- "constitutes" -> use "is", "represents", or "defines"
- "utilize" -> use "use"
- "facilitate" -> use "enable" or "help"
- "in order to" -> use "to"
- "subsequently" -> use "later" or "then"
- "comprise" -> use "include" or "contain"
- "leverage" -> use "use"
- "implement" -> use "create" or "build" when appropriate

The goal is to make API documentation accessible to all developers regardless of
their English proficiency or technical background.

## Module Documentation

Every module file should start with top-level documentation using `//!`:

```rust
//! Cargo documentation generation utilities.
//!
//! This module provides functions for generating documentation from
//! Cargo packages, including parsing rustdoc JSON output and converting
//! it to markdown format.
```

## API Reference Examples

ðŸ›‘ Bad (Bullet Points & Headers):

```rust
/// A handler for network requests.
///
/// This trait defines the interface for processing incoming requests and
/// generating responses. Handlers operate independently of the transport layer.
///
/// - **Transport-agnostic**: Both producers and consumers work with any handler
/// - **Protocol-agnostic**: Handlers don't understand request/response structure
/// - **Bidirectional**: Same handler can be used for both reading and writing
/// - **Simple interface**: Just process data streams
```

ðŸ›‘ Bad (Arguments/Returns Headers):

```rust
/// Send a data packet.
///
/// This is a low-level I/O operation. The packet should be properly formatted,
/// but the handler doesn't validate this.
///
/// # Arguments
///
/// * `packet` - The data packet to send

/// Receive a data packet.
///
/// This is a low-level I/O operation. The returned packet should be properly
/// formatted, but the handler doesn't validate this.
///
/// # Returns
///
/// The received data packet
```

âœ… Good (Concise Paragraph):

```rust
/// A handler for network requests.
///
/// This trait defines the interface for processing requests and generating
/// responses. Handlers operate independently of the transport layer.
///
/// The design is transport-agnostic, allowing both producers and consumers to work
/// with any handler implementation. Handlers are bidirectional and can be used
/// for both read and write roles, with a simple interface focused only on
/// processing data streams.
```

âœ… Good (List Format):

```rust
/// A protocol error.
///
/// This represents an error that can be returned by a server
/// or received by a client. It follows the protocol specification.
///
/// Standard error codes:
/// - 1001: Parse error
/// - 1002: Invalid request
/// - 1003: Operation not found
/// - 1004: Invalid parameters
/// - 1005: Internal error
/// - 2000 to 2999: Application error (implementation specific)
```

âœ… Good (Function Documentation):

```rust
/// Parses rustdoc JSON output and extracts item documentation.
///
/// This function reads rustdoc JSON generated by `cargo rustdoc -- --output-format json`
/// and extracts documentation items including functions, structs, and enums.
/// The output is organized by crate and item type for easy navigation.
///
/// # Errors
///
/// Returns an error if the JSON file cannot be read or does not contain
/// valid rustdoc JSON format.
pub fn parse_rustdoc(path: &Path) -> Result<Documentation> {
    // ...
}
```

## Cross-References

Use intra-doc links to reference other items in the documentation:

```rust
/// Processes documentation items and generates markdown output.
///
/// See [`Documentation`] for the input structure and [`MarkdownWriter`]
/// for the output format.
///
/// This function is called by [`generate_docs`] after parsing is complete.
pub fn process_items(docs: &Documentation) -> String {
    // ...
}
```

## Example Documentation

Include examples for complex or non-obvious APIs. Use the `# Example` header:

````rust
/// Builds a documentation index from parsed items.
///
/// The index groups items by type and provides quick access to
/// frequently used documentation.
///
/// # Example
///
/// ```
/// use doc_generator::Documentation;
///
/// let docs = Documentation::new();
/// let index = docs.build_index();
///
/// assert_eq!(index.functions.len(), 42);
/// ```
pub fn build_index(&self) -> Index {
    // ...
}
````
