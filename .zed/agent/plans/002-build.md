---
type: master
title: "Implement cargo docmd build Command - Master Overview"
seq: 002
slug: "build"
created: "2026-01-07T04:33:00Z"
status: in_progress
subplans:
    - id: 01
      title: "Build Infrastructure"
      file: "002-build-01.md"
    - id: 02
      title: "Markdown Framework"
      file: "002-build-02.md"
    - id: 03
      title: "Basic Type Generators"
      file: "002-build-03.md"
    - id: 04
      title: "Trait and Function Generators"
      file: "002-build-04.md"
    - id: 05
      title: "Advanced Type Generators"
      file: "002-build-05.md"
---

# Implement cargo docmd build Command - Master Overview

Implement the `cargo docmd build` command through a structured approach with
focused sub-plans. This master plan coordinates the implementation across
multiple phases to ensure incremental delivery and manageable work scope.

## Current Problems

The original monolithic plan for the build command covered too much ground for a
single task, making it difficult to implement, test, and maintain. The
implementation needs to be broken down into focused, manageable components that
can be executed independently.

## Proposed Solution

Split the build command implementation into five focused sub-plans that can be
executed sequentially, with each plan producing working, testable code:

1. **Infrastructure First**: Establish the core build command and markdown
   framework
2. **Generators by Category**: Group markdown generators by related
   functionality
3. **Incremental Delivery**: Each plan produces working, testable code

## Analysis Required

No additional analysis is required for this master plan. The individual
sub-plans contain detailed analysis and investigation tasks.

## Implementation Checklist

### Master Plan Coordination

- [x] Split original monolithic plan into focused sub-plans
- [x] Define sub-plan dependencies and execution order
- [x] Coordinate sub-plan completion tracking
- [ ] Verify all sub-plans are completed
- [ ] Verify overall integration works correctly

## Test Plan

### Verification Tests

- [ ] Verify `cargo docmd build --crate <name>` works for any crate
- [ ] Verify markdown files are generated in `$CARGO_TARGET_DIR/docmd`
- [ ] Verify all 21 rustdoc item types have generators
- [ ] Verify index page lists all items with links
- [ ] Verify all generated files follow consistent naming convention

### Integration Tests

- [ ] Test end-to-end workflow with a real crate
- [ ] Verify all tests pass across all sub-plans
- [ ] Verify no compiler warnings
- [ ] Verify documentation is complete and accurate

## Structure After Changes

### File Structure

```
cargo-docmd/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ main.rs                 # Updated Command enum (Build)
â”‚   â”œâ”€â”€ error.rs                # Centralized error definitions
â”‚   â”œâ”€â”€ cargo.rs                # Cargo command execution
â”‚   â”œâ”€â”€ markdown/               # Markdown generation framework
â”‚   â”‚   â”œâ”€â”€ mod.rs              # Module exports
â”‚   â”‚   â”œâ”€â”€ index.rs            # Index page generator
â”‚   â”‚   â”œâ”€â”€ utils.rs            # Common utilities
â”‚   â”‚   â”œâ”€â”€ struct_.rs          # Struct generator
â”‚   â”‚   â”œâ”€â”€ enum_.rs            # Enum generator
â”‚   â”‚   â”œâ”€â”€ union.rs            # Union generator
â”‚   â”‚   â”œâ”€â”€ alias.rs            # Type alias generator
â”‚   â”‚   â”œâ”€â”€ trait_.rs           # Trait generator
â”‚   â”‚   â”œâ”€â”€ function.rs         # Function generator
â”‚   â”‚   â”œâ”€â”€ impl_.rs            # Impl block generator
â”‚   â”‚   â”œâ”€â”€ constant.rs         # Constant generator
â”‚   â”‚   â”œâ”€â”€ module.rs           # Module generator
â”‚   â”‚   â”œâ”€â”€ macro.rs            # Macro generator
â”‚   â”‚   â”œâ”€â”€ static_item.rs      # Static generator
â”‚   â”‚   â”œâ”€â”€ trait_alias.rs      # Trait alias generator
â”‚   â”‚   â”œâ”€â”€ extern_crate.rs     # Extern crate generator
â”‚   â”‚   â”œâ”€â”€ use_item.rs         # Use item generator
â”‚   â”‚   â”œâ”€â”€ primitive.rs        # Primitive generator
â”‚   â”‚   â””â”€â”€ extern_type.rs      # Extern type generator
â”‚   â””â”€â”€ commands/
â”‚       â”œâ”€â”€ mod.rs              # Module exports
â”‚       â”œâ”€â”€ browse.rs           # Browse command
â”‚       â””â”€â”€ build.rs            # Build command (renamed from generate.rs)
```

### Item Types to Handle

All 21 variants from `rustdoc_types::ItemEnum`:

| Type        | Generator Plan                |
| ----------- | ----------------------------- |
| Module      | Advanced Types                |
| ExternCrate | Advanced Types                |
| Use         | Advanced Types                |
| Union       | Basic Types                   |
| Struct      | Basic Types                   |
| StructField | Generated by Struct generator |
| Enum        | Basic Types                   |
| Variant     | Generated by Enum generator   |
| Function    | Traits and Functions          |
| Trait       | Traits and Functions          |
| TraitAlias  | Advanced Types                |
| Impl        | Traits and Functions          |
| TypeAlias   | Basic Types                   |
| Constant    | Traits and Functions          |
| Static      | Advanced Types                |
| ExternType  | Advanced Types                |
| Macro       | Advanced Types                |
| ProcMacro   | Advanced Types                |
| Primitive   | Advanced Types                |
| AssocConst  | Generated by Impl generator   |
| AssocType   | Generated by Impl generator   |

## Design Considerations

### 1. Plan Split Strategy

**Decision**: Split the build command implementation into five focused
sub-plans.

- **Alternative**: Implement everything in a single large plan.
    - Rejected: Too much scope for one plan, difficult to execute and test
      incrementally
- **Alternative**: Create more than five sub-plans.
    - Rejected: Five is a good balance between granularity and overhead
- **Resolution**: Five sub-plans cover infrastructure, framework, and three
  categories of generators

### 2. Sub-Plan Dependencies

**Decision**: Sub-plans have linear dependencies with infrastructure first.

- **Alternative**: Parallelize work on sub-plans.
    - Rejected: Framework and generators depend on infrastructure, making
      parallel work difficult
- **Resolution**: Execute sub-plans sequentially: Infrastructure â†’ Framework â†’
  Basic Types â†’ Traits/Functions â†’ Advanced Types

### 3. Cross-Cutting Concerns

Code style, documentation, testing, and error handling apply across all
sub-plans:

- **Code Style**: Follow Rust Coding Guidelines in `AGENTS.md`, use descriptive
  names, favor linear flow
- **Documentation**: Update `DOCS.md` after each plan, add module docs, focus on
  "what" and "why"
- **Testing**: Write unit tests, group by behavior, use descriptive prefixes,
  run after each plan
- **Error Handling**: Clear messages, full paths, installation suggestions,
  centralized error types

## Success Criteria

- [ ] All 5 sub-plans completed
- [ ] `cargo docmd build --crate <name>` works for any crate
- [ ] Markdown files generated in `$CARGO_TARGET_DIR/docmd`
- [ ] All 21 rustdoc item types have generators
- [ ] Index page lists all items with links
- [ ] All generated files follow consistent naming convention
- [ ] All tests pass (unit and integration)
- [ ] No compiler warnings
- [ ] Documentation is complete and accurate

## Implementation Status: ðŸŸ¡ IN PROGRESS

## Implementation Notes

### Sub-Plan Status

- [x] Build Infrastructure (002-build-01.md): âœ… COMPLETED
- [x] Markdown Framework (002-build-02.md): âœ… COMPLETED
- [ ] Basic Type Generators (002-build-03.md): ðŸŸ¡ NOT STARTED
- [ ] Trait and Function Generators (002-build-04.md): ðŸŸ¡ NOT STARTED
- [ ] Advanced Type Generators (002-build-05.md): ðŸŸ¡ NOT STARTED

Refer to individual plan files for detailed implementation steps, test plans,
and design considerations.
